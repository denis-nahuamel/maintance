
create table TCatalogo
( -- lista de atributos
codCatalogo INT NOT NULL AUTO_INCREMENT,
categoria varchar(20),
marca varchar(20),
modelo varchar(20),
descripcion varchar(40),
-- especificacion de claves
primary key (codCatalogo)
)ENGINE=InnoDB AUTO_INCREMENT = 1;

create table TEquipo
( -- lista de atributos
codEquipo INT NOT NULL AUTO_INCREMENT,
patrimonio varchar(12),
descripcion varchar(20), -- PC-02, PRY02
estado varchar(11)  NOT NULL CHECK (estado='Operativo' or estado='Inoperativo'),
ubicacion varchar(20),
darBaja TINYINT,
codCatalogo INT NOT NULL,
-- especificacion de claves
primary key (codEquipo),
FOREIGN KEY (codCatalogo) REFERENCES TCatalogo (codCatalogo)
)ENGINE=InnoDB AUTO_INCREMENT = 1;

create table TComponente
( -- lista de atributos
codComponente INT NOT NULL AUTO_INCREMENT,
estado varchar(11) NOT NULL CHECK (estado='Operativo' or estado='Inoperativo'),
ubicacion varchar(20),
codEquipo INT, -- Null cuando esta en almacen
codCatalogo INT NOT NULL,
-- especificacion de claves
primary key (codComponente),
foreign key (codEquipo) references TEquipo(codEquipo),
FOREIGN KEY (codCatalogo) REFERENCES TCatalogo (codCatalogo)
);

create table TUsuario
( -- lista de atributos
codUsuario varchar(8) not null,
usuario varchar(20) not null,
contra varchar(32) not null,
-- especificacion de claves
primary key (codUsuario)
);

create table TDocente
( -- lista de atributos
codDocente varchar(6) not null,
nombre varchar(20) not null,
apellidos varchar(20) not null,
telefono varchar(11),
correo varchar(60),
categoria varchar(17) CHECK (categoria='PRINCIPAL' or categoria='ASOCIADO' or categoria='AUXILIAR' or categoria='JEFE DE PRACTICAS'),
condicion varchar(10) CHECK (condicion='CONTRATADO' or condicion='NOMBRADO'),
-- Dedicacion exclusiva, Tiempo completo, Tiempo parcial de 10 Hras, Tiempo parcial de 20 Hras, A1,A2,A3,B1,B2,B3
regimen varchar(4) CHECK (regimen='DE' or regimen='TC' or regimen='TP10' or regimen='TP20' or regimen='A1' or regimen='A2' or regimen='A3' or regimen='B1' or regimen='B2' or regimen='B3'),
-- especificacion de claves
primary key (codDocente),
FOREIGN KEY (codDocente) REFERENCES TUsuario (codUsuario)
);

create table TJefe
( -- lista de atributos
codJefe varchar(6) not null,
fechInicioGestion  datetime not null,
fechFinGestion  datetime not null,
-- especificacion de claves
primary key (codJefe),
FOREIGN KEY (codJefe) REFERENCES TDocente (codDocente)
);

create table TTecnico
( -- lista de atributos
dni varchar(8) not null,
nombre varchar(20) not null,
apellidos varchar(20) not null,
telefono varchar(11),
correo varchar(60),
-- especificacion de claves
primary key (dni),
FOREIGN KEY (dni) REFERENCES TUsuario (codUsuario)
);

create table TIncidente
( -- lista de atributos
codIncidente INT NOT NULL AUTO_INCREMENT,
fecha datetime not null,
descripcion varchar(40),
solucionado TINYINT,
codDocente varchar(6) not null,
codEquipo INT NOT NULL,
-- especificacion de claves
primary key (codIncidente),
foreign key (codEquipo) references TEquipo(codEquipo),
foreign key (codDocente) references TDocente(codDocente)
)ENGINE=InnoDB AUTO_INCREMENT = 1;

create table TTarea
( -- lista de atributos
codTarea INT NOT NULL AUTO_INCREMENT,
fecha datetime not null,
descripcion varchar(40) not null,
dni varchar(8) not null,
codJefe varchar(6) not null,
codIncidente INT NOT NULL,
-- especificacion de claves
primary key (codTarea),
foreign key (dni) references TTecnico(dni),
foreign key (codJefe) references TJefe(codJefe),
foreign key (codIncidente) references TIncidente(codIncidente)
)ENGINE=InnoDB AUTO_INCREMENT = 1;

create table TInforme
( -- lista de atributos
codInforme INT NOT NULL AUTO_INCREMENT,
fecha datetime not null,
codTarea INT NOT NULL,
-- especificacion de claves
primary key (codInforme),
foreign key (codTarea) references TTarea(codTarea)
);

create table TSolucionHardware
( -- lista de atributos
codSolucionHw INT NOT NULL AUTO_INCREMENT,
descripcion varchar(40),
codComponente INT NOT NULL,
codInforme INT NOT NULL,
-- especificacion de claves
primary key (codSolucionHw),
foreign key (codInforme) references TInforme(codInforme),
foreign key (codComponente) references TComponente(codComponente)
);

create table TSolucionSoftware
( -- lista de atributos
codSolucionSw INT NOT NULL AUTO_INCREMENT,
descripcion varchar(40),
codInforme INT NOT NULL,
-- especificacion de claves
primary key (codSolucionSw),
foreign key (codInforme) references TInforme(codInforme)
);


INSERT INTO TCatalogo values
-- (codCatalogo, 'categoria', 'marca', 'modelo', 'descripcion'),
(1, 'DISCO DURO 1 TB', '', '', ''),
(2, 'DISCO DURO 500 GB', 'MARCA', '', ''),
(3, 'LAMPARA', 'TOSHIBA', '', ''),
(4, 'LAPTOP', 'PANASONIC', 'T470P THINKPAD', 'CORE I7 7TH GEN'),
(5, 'MEMORIA RAM 4GB', 'LENOVO', '', ''),
(6, 'MEMORIA RAM 8GB', 'KINSTONG', '', ''),
(7, 'MONITOR', 'KINSTONG', '', ''),
(8, 'PC', 'HP', 'WORKSTATION', 'CORE I7 7TH GEN'),
(9, 'PC', 'LENOVO', '', 'CORE I5 5TH GEN'),
(10, 'PC', 'HP', 'ONLYONE', ''),
(11, 'PROYECTOR', 'LENOVO', '', ''),
(12, 'PROYECTOR', 'HITACHI', '', ''),
(13, 'TECLADO', 'PANASONIC', '', ''),
(14, 'TECLADO', 'LENOVO', '', ''),
(15, 'CABLE HDMI', 'HP', '', ''),
(16, 'PIZARRA INTELIGENTE', '', '', ''),
(17, 'TARJETA GRAFICA', '', '', '');

INSERT INTO TEquipo values
-- (codEquipo, 'patrimonio', 'descripcion', 'estado', 'ubicacion', darBaja, codCatalogo),
(1, '', 'PRY01', 'OPERATIVO', 'IN301', 0, 11),
(2, '', 'PRY02', 'INOPERATIVO', 'ALMACEN', 0, 12),
(3, '', 'PZ-01', 'OPERATIVO', 'IN201', 0, 16),
(4, '', 'PZ-02', 'OPERATIVO', 'IN202', 0, 16),
(5, '', 'PZ-03', 'OPERATIVO', 'IN203', 0, 16),
(6, '', 'PC-07', 'OPERATIVO', 'IN301', 0, 1 ),
(7, '', 'PC-25', 'OPERATIVO', 'IN301', 0, 1 ),
(8, '', 'PC-17', 'INOPERATIVO', 'ALMACEN', 0, 1 ),
(9, '', 'PC-07', 'OPERATIVO', 'IN306', 0, 1 ),
(10, '', 'PC-15', 'OPERATIVO', 'IN309', 0, 1),
(11, '', 'PC-10', 'OPERATIVO', 'IN310', 0, 8);

INSERT INTO TComponente values
-- (codComponente, 'estado', 'ubicacion', codEquipo, codCatalogo),
(1, 'INOPERATIVO', 'ALMACEN', 7, 1),
(2, 'INOPERATIVO', 'ALMACEN', 1, 3),
(3, 'OPERATIVO', 'IN303', 8, 8 ),
(4, 'OPERATIVO', 'IN302', 2, 11),
(5, 'OPERATIVO', 'IN301', 6, 5 ),
(6, 'OPERATIVO', 'IN310', 11, 7);

INSERT INTO TUsuario values
-- ('codUsuario', 'usuario', 'contra'),
('70123123', 'EBERT', '4321'),
('70987987', 'MARCO', '4321'),
('DOC001', 'ROBERT', '1234'),
('DOC002', 'RYNO', '1234'),
('DOC003', 'WILLIAN', '4321'),
('DOC004', 'WALDO', '9876'),
('DOC005', 'EPALOMINO', '6789');

INSERT INTO TDocente values
-- ('codDocente', 'nombre', 'apellidos', 'telefono', 'correo', 'categoria', 'condicion', 'regimen'),
('DOC001', 'ROBERT', 'ALZAMORA', '', '',  'PRINCIPAL', 'NOMBRADO', 'A1'),
('DOC002', 'RONY', 'VILLAFUERTE', '', '', 'JEFE DE PRACTICAS', 'CONTRATADO', 'TP20'),
('DOC003', 'WILLIAN', 'ZAMALLOA', '', '', 'ASOCIADO', 'CONTRATADO', 'DE'),
('DOC004', 'WALDO', 'IBARRA', '', '', 'JEFE DE PRACTICAS', 'CONTRATADO', 'TC'),
('DOC005', 'EMILIO', 'PALOMINO', '', '',  'AUXILIAR', 'NOMBRADO', 'TP10');

INSERT INTO TJefe values
-- ('codJefe', 'fechInicioGestion', 'fechFinGestion'),
('DOC004', '2019-05-1', '2021-05-1');

INSERT INTO TTecnico values
-- ('dni', 'nombre', 'apellidos', 'telefono', 'correo'),
('70123123', 'EBERT', 'QUINTANILLA', '', ''),
('70987987', 'MARCO', '', '', '');


INSERT INTO TIncidente values
-- (codIncidente, fecha, 'descripcion', solucionado, 'codDocente', codEquipo),
(1, '2020-09-28', 'DISCO DURO MALOGRADO', 0, 'DOC001', 7),
(2, '2020-09-28', 'LAMPARA MALOGRADA', 0, 'DOC001', 1),
(3, '2020-09-28', 'PLACA MALOGRADA', 0, 'DOC002', 8),
(4, '2020-09-27', 'PLACA MALOGRADA', 0, 'DOC003', 2),
(5, '2020-09-28', 'FALTA MEMORIA RAM', 0, 'DOC004', 6),
(6, '2020-09-29', 'MONITOR NO PRENDE', 0, 'DOC005', 11);
(7, '2020-10-14', 'PC NO PRENDE', 0, 'DOC001', 11);

INSERT INTO TTarea values
-- (codTarea, fecha, 'descripcion', 'dni', 'codJefe', codIncidente),
(1, '2020-09-28', 'REEMPLAZAR DISCO DURO', '70987987', 'DOC004', 1),
(2, '2020-09-28', 'REEMPLAZAR LAMPARA', '70987987', 'DOC004', 2),
(3, '2020-09-28', 'REEMPLAZAR PC', '70987987', 'doc004', 3),
(4, '2020-09-28', 'REEMPLAZAR PROYECTOR', '70987987', 'DOC004', 4),
(5, '2020-09-28', 'REPOTENCIAR MEMORIA RAM', '70123123', 'DOC004', 5),
(6, '2020-09-29', 'REPARACION DE MONITOR', '70123123', 'DOC004', 6),
(7, '2020-09-29', 'MANTENIMIENTO PREVENTIVO DE MONITOR', '70123123', 'DOC004', 6);

INSERT INTO TInforme values
-- (codInforme, fecha, codTarea),
(1, '2020-09-28', 1),
(2, '2020-09-28', 2),
(3, '2020-09-29', 3),
(4, '2020-09-29', 4),
(5, '2020-09-28', 5),
(6, '2020-09-29', 6),
(7, '2020-09-29', 7);

INSERT INTO TSolucionHardware values
-- (codSolucionHw, 'descripcion', codComponente, codInforme),
(1, 'DISCO DURO REEMPLAZADO', 1, 1),
(2, 'LIMPIEZA DE PC', 1, 1),
(3, 'LIMPIEZA DE PROYECTOR', 2, 2),
(4, 'LAMPARA REEMPLAZADA', 2, 2),
(5, 'DAR DE BAJA', 3, 3),
(6, 'DAR DE BAJA', 4, 4),
(7, 'REPOTENCIADO RAM 4Gb', 5, 5),
(8, 'MONITOR REPARADO', 6, 6),
(9, 'MANTENIMIENTO REALIZADO', 6, 7);

INSERT INTO TSolucionSoftware values
-- (codSolucionSw, 'descripcion', codInforme),
(1, 'INSTALACION DE SO', 1),
(2, 'INSTALACION DE PQTE OFFICE', 1);
